<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thamiris & Felipe | Fotografia</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Lato', sans-serif; }
        .font-serif-display { font-family: 'Cormorant Garamond', serif; }
        .grayscale-img { filter: grayscale(100%); transition: all 0.8s ease; }
        .group:hover .grayscale-img { filter: grayscale(0%); transform: scale(1.05); }
        .hero-img { filter: brightness(0.6); animation: slowZoom 30s infinite alternate ease-in-out; }
        @keyframes slowZoom { from { transform: scale(1); } to { transform: scale(1.1); } }
        [v-cloak] { display: none; }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div id="root"></div>

    <!-- React and Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        window.FirebaseLib = { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, getFirestore, doc, setDoc, onSnapshot };
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ÍCONES SVG INLINE (Para evitar erro de carregamento de biblioteca externa) ---
        const IconMenu = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>;
        const IconX = ({size=24}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;
        const IconLock = ({size=12}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>;

        // --- CONFIGURAÇÃO FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyDIwpQtKwxy4AWjsPIQ8t0IieWEmyBjtwY",
            authDomain: "sitefotografia-cfa61.firebaseapp.com",
            projectId: "sitefotografia-cfa61",
            storageBucket: "sitefotografia-cfa61.firebasestorage.app",
            messagingSenderId: "849725176102",
            appId: "1:849725176102:web:0b5e6106fe69ce4c6429e7"
        };

        const defaultData = {
            hero: {
                title: "A Essência do Momento",
                subtitle: "Onde a luz encontra a memória",
                bgImage: "https://images.unsplash.com/photo-1452587925148-ce544e77e70d?q=80&w=3840&auto=format&fit=crop" 
            },
            sobre: {
                titulo: "Nossa Trajetória",
                texto: "Somos Thamiris Souza e Felipe Laia...",
                imagem: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?q=80&w=2000&auto=format&fit=crop"
            },
            contato: {
                email: "contato@exemplo.com",
                instagram: "thamirisefelipe",
                whatsapp: "5511993453280"
            },
            portfolio: [
                { 
                    id: '1', 
                    category: 'Casamentos', 
                    src: 'https://i.postimg.cc/MnMXxPZX/IMG-8649.jpg', 
                    title: 'Isabela - 11 anos',
                    isGallery: true,
                    photos: ['https://i.postimg.cc/MnMXxPZX/IMG-8649.jpg', 'https://i.postimg.cc/YjWXGkXr/IMG-8689.jpg']
                }
            ]
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [siteData, setSiteData] = useState(defaultData);
            const [isAdminMode, setIsAdminMode] = useState(false);
            const [isLoginOpen, setIsLoginOpen] = useState(false);
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(true);
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [modalData, setModalData] = useState(null);
            const [scrolled, setScrolled] = useState(false);

            useEffect(() => {
                if (!window.FirebaseLib) return;
                const { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, getFirestore, doc, onSnapshot, setDoc } = window.FirebaseLib;
                const app = initializeApp(firebaseConfig);
                const auth = getAuth(app);
                const db = getFirestore(app);
                const appId = "sitefotografia-cfa61";

                signInAnonymously(auth).catch(console.error);
                
                onAuthStateChanged(auth, (u) => {
                    setUser(u);
                    if (u) {
                        const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'content', 'main');
                        onSnapshot(docRef, (docSnap) => {
                            if (docSnap.exists()) {
                                setSiteData(docSnap.data());
                            } else {
                                setDoc(docRef, defaultData);
                            }
                            setLoading(false);
                        }, (error) => {
                            console.error("Erro no Firestore:", error);
                            setLoading(false);
                        });
                    }
                });

                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const handleLogin = (e) => {
                e.preventDefault();
                if (password === '290611') {
                    setIsAdminMode(true);
                    setIsLoginOpen(false);
                    setPassword('');
                } else {
                    alert("Senha incorreta.");
                }
            };

            const saveData = async () => {
                const { getFirestore, doc, setDoc } = window.FirebaseLib;
                const db = getFirestore();
                try {
                    await setDoc(doc(db, 'artifacts', 'sitefotografia-cfa61', 'public', 'data', 'content', 'main'), siteData);
                    alert("Salvo com sucesso!");
                } catch (err) {
                    alert("Erro ao salvar.");
                }
            };

            const scrollToSection = (id) => {
                document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
                setIsMenuOpen(false);
            };

            if (loading || !siteData) {
                return <div className="h-screen flex items-center justify-center bg-stone-900 text-white font-serif-display italic tracking-[0.2em]">Carregando Memórias...</div>;
            }

            return (
                <div className="min-h-screen">
                    {/* BARRA ADMIN */}
                    {isAdminMode && (
                        <div className="fixed bottom-0 left-0 right-0 bg-stone-900 text-white z-[200] p-4 flex justify-between items-center shadow-2xl border-t border-stone-700">
                            <button onClick={saveData} className="bg-white text-stone-900 px-6 py-2 rounded-sm text-[10px] font-bold uppercase">Salvar no Banco</button>
                            <button onClick={() => setIsAdminMode(false)} className="text-stone-400 text-[10px] uppercase">Sair</button>
                        </div>
                    )}

                    {/* NAV */}
                    <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled || isMenuOpen ? 'bg-white py-4 shadow-md text-stone-800' : 'bg-transparent py-6 text-white'}`}>
                        <div className="container mx-auto px-6 flex justify-between items-center">
                            <div className="text-xl font-serif-display tracking-widest font-semibold uppercase cursor-pointer" onClick={() => scrollToSection('home')}>Thamiris & Felipe</div>
                            <div className="hidden md:flex space-x-12 text-[10px] tracking-[0.3em] uppercase">
                                <button onClick={() => scrollToSection('portfolio')} className="hover:opacity-50">Portfólio</button>
                                <button onClick={() => scrollToSection('sobre')} className="hover:opacity-50">Sobre</button>
                                <button onClick={() => scrollToSection('contato')} className="hover:opacity-50">Contato</button>
                            </div>
                            <button className="md:hidden" onClick={() => setIsMenuOpen(!isMenuOpen)}>
                                {isMenuOpen ? <IconX /> : <IconMenu />}
                            </button>
                        </div>
                        {/* Mobile Menu */}
                        {isMenuOpen && (
                            <div className="md:hidden bg-white text-stone-800 absolute top-full left-0 w-full shadow-lg flex flex-col p-6 space-y-4 text-[10px] tracking-widest uppercase text-center border-t border-stone-100">
                                <button onClick={() => scrollToSection('portfolio')}>Portfólio</button>
                                <button onClick={() => scrollToSection('sobre')}>Sobre</button>
                                <button onClick={() => scrollToSection('contato')}>Contato</button>
                            </div>
                        )}
                    </nav>

                    {/* HERO */}
                    <section id="home" className="relative h-screen flex items-center justify-center bg-stone-900 overflow-hidden">
                        <img src={siteData.hero?.bgImage} className="absolute inset-0 w-full h-full object-cover hero-img opacity-60" />
                        <div className="relative z-10 text-center text-white px-6">
                            <p className="tracking-[0.6em] text-[10px] mb-8 uppercase">{siteData.hero?.subtitle}</p>
                            <h1 className="font-serif-display text-6xl md:text-9xl mb-10 italic font-light">{siteData.hero?.title}</h1>
                            <button onClick={() => scrollToSection('portfolio')} className="border border-white/80 px-10 py-4 text-[10px] tracking-widest uppercase hover:bg-white hover:text-stone-900 transition-all">Ver Portfólio</button>
                        </div>
                    </section>

                    {/* PORTFOLIO */}
                    <section id="portfolio" className="py-32 bg-white">
                        <div className="container mx-auto px-6">
                            <h2 className="font-serif-display text-5xl italic text-center mb-20">Portfólio</h2>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-16">
                                {siteData.portfolio?.map(item => (
                                    <div key={item.id} className="group cursor-pointer" onClick={() => setModalData({ item, currentIndex: 0 })}>
                                        <div className="aspect-[16/10] overflow-hidden bg-stone-100">
                                            <img src={item.src} className="w-full h-full object-cover grayscale-img" />
                                        </div>
                                        <div className="mt-4 border-b pb-4 flex justify-between items-end">
                                            <div>
                                                <span className="text-[9px] uppercase text-stone-400">{item.category}</span>
                                                <p className="font-serif-display text-2xl italic">{item.title}</p>
                                            </div>
                                            <div className="text-stone-300">→</div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* SOBRE */}
                    <section id="sobre" className="py-32 bg-stone-50">
                        <div className="container mx-auto px-6 flex flex-col md:flex-row items-center gap-20">
                            <div className="md:w-1/2">
                                <img src={siteData.sobre?.imagem} className="w-full shadow-2xl grayscale-img" />
                            </div>
                            <div className="md:w-1/2 space-y-6">
                                <h2 className="font-serif-display text-5xl italic">{siteData.sobre?.titulo}</h2>
                                <p className="text-stone-600 leading-relaxed font-light whitespace-pre-line">{siteData.sobre?.texto}</p>
                            </div>
                        </div>
                    </section>

                    {/* CONTATO */}
                    <section id="contato" className="py-32 bg-stone-900 text-white text-center">
                        <div className="container mx-auto px-6 max-w-4xl">
                            <h2 className="font-serif-display text-5xl italic mb-12">Vamos Conversar?</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-12 mb-20">
                                <div>
                                    <p className="text-[10px] uppercase tracking-widest text-stone-500 mb-2">E-mail</p>
                                    <a href={`mailto:${siteData.contato?.email}`} className="text-sm underline underline-offset-4">{siteData.contato?.email}</a>
                                </div>
                                <div>
                                    <p className="text-[10px] uppercase tracking-widest text-stone-500 mb-2">Instagram</p>
                                    <a href={`https://instagram.com/${siteData.contato?.instagram?.replace('@','')}`} target="_blank" className="text-sm underline underline-offset-4">@{siteData.contato?.instagram?.replace('@','')}</a>
                                </div>
                                <div>
                                    <p className="text-[10px] uppercase tracking-widest text-stone-500 mb-2">WhatsApp</p>
                                    <a href={`https://wa.me/${siteData.contato?.whatsapp}`} target="_blank" className="text-sm underline underline-offset-4">{siteData.contato?.whatsapp}</a>
                                </div>
                            </div>
                            <button onClick={() => window.open(`https://wa.me/${siteData.contato?.whatsapp}`)} className="bg-white text-stone-900 px-12 py-5 text-[10px] font-bold uppercase tracking-widest hover:bg-stone-200 transition-all">Solicitar Orçamento</button>
                        </div>
                    </section>

                    {/* FOOTER */}
                    <footer className="py-12 bg-black text-stone-600 text-center">
                        <p className="text-[9px] uppercase tracking-[0.4em] mb-4">© 2026 • Thamiris & Felipe</p>
                        <button onClick={() => setIsLoginOpen(true)} className="opacity-20 hover:opacity-100 text-[8px] uppercase tracking-widest flex items-center gap-2 mx-auto justify-center"><IconLock /> Painel Admin</button>
                    </footer>

                    {/* MODAL LOGIN */}
                    {isLoginOpen && (
                        <div className="fixed inset-0 z-[250] bg-black/95 flex items-center justify-center p-4">
                            <div className="bg-white p-12 max-w-sm w-full relative">
                                <button onClick={() => setIsLoginOpen(false)} className="absolute top-4 right-4 text-stone-400"><IconX size={20}/></button>
                                <h3 className="font-serif-display text-2xl italic mb-8 text-center text-stone-900">Acesso Restrito</h3>
                                <form onSubmit={handleLogin} className="space-y-6">
                                    <input type="password" placeholder="Senha" className="w-full border-b p-3 outline-none" value={password} onChange={e => setPassword(e.target.value)} autoFocus />
                                    <button type="submit" className="w-full bg-stone-900 text-white p-4 text-[10px] font-bold uppercase tracking-widest">Entrar</button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* LIGHTBOX */}
                    {modalData && (
                        <div className="fixed inset-0 z-[100] bg-black/98 flex items-center justify-center p-4" onClick={() => setModalData(null)}>
                            <img src={modalData.item.src} className="max-h-[90vh] max-w-full object-contain" />
                            <button className="absolute top-10 right-10 text-white"><IconX size={40}/></button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
